<div class="row">
    <div class="col-md-3">
        <div class="sidebar-bg">
            <div class="mb-3">
                <label>Khách hàng</label>
                <div item-search-filter="" select-changed-callback="onSupplyerSelectChanged"
                    clear-after-selected="false" only-single-item="true" show-cam-barcode-scanner="false"
                    handle-broadcast="true" search-type="4" class="flex-grow-1 ip-position mb-3 ng-isolate-scope">
                    <div ng-if="!showCamBarcodeScanner" class="">
                        <div class="w-100">
                            <div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control ng-valid ng-touched ng-dirty open"
                                theme="bootstrap" id="itemSearchId" reset-search-input="clearAfterSelected"
                                forward-enter-key="forwardEnterKey">
                                <div>
                                    <span class="text-truncate-line ui-select-match ui-select-match"
                                        placeholder="Nhập mã, mã vạch hoặc tên..." id="itemSearchUISelectID">
                                        <span>
                                            <span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1"
                                                type="button" ui-select-sort="$select.selected">
                                                <span class="close ui-select-match-close" ng-hide="$select.disabled"
                                                    ng-click="$selectMultiple.removeChoice($index)">&nbsp;×
                                                </span>
                                                <span uis-transclude-append="">
                                                    <span class="ng-binding ng-scope">
                                                        Ban bảo vệ chăm sóc sức khỏe cán bộ tỉnh Thái Bình
                                                    </span>
                                                </span>
                                            </span>
                                        </span>
                                    </span>
                                    <input type="search" autocomplete="off" autocorrect="off" autocapitalize="off"
                                        spellcheck="false"
                                        class="ui-select-search input-xs ng-valid ng-dirty ng-touched" placeholder=""
                                        ng-disabled="$select.disabled" ng-click="$select.activate()"
                                        ng-model="$select.search" role="combobox" aria-expanded="true"
                                        aria-label="Select box" ng-class="{'spinner': $select.refreshing}"
                                        ondrop="return false;" style="width: 107px;">
                                </div>
                                <div class="ui-select-no-choice"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-3">
                <div class="form-check">
                    <input type="checkbox" ng-model="filterModel.IsDeleted" class="form-control form-check-input"
                        ng-change="onDeletedSelectChanged()">
                    <label class="form-check-label">Khách hàng bị xóa</label>
                </div>
            </div>
            <div class="mb-3">
                <label>Nhóm khách</label>
                <div class="control-group">
                    <select class="form-control mb-0" ng-model="filterModel.CusType"
                        ng-change="filterCustomers(); $event.preventDefault(); $event.stopPropagation();">
                        <option value="" selected>--Tất cả--</option>
                        <option value="0">Cá nhân</option>
                        <option value="1">Tổ chức</option>
                    </select>
                </div>
            </div>
            <div class="mb-3">
                <label>Loại khách hàng</label>
                <div class="control-group">
                    <select class="form-control mb-0" ng-model="filterModel.CusType"
                        ng-change="filterCustomers(); $event.preventDefault(); $event.stopPropagation();">
                        <option value="" selected>--Tất cả--</option>
                        <option value="0">Cá nhân</option>
                        <option value="1">Tổ chức</option>
                    </select>
                </div>
            </div>
            <div class="control-group d-flex justify-content-between gap-10 btn-group-flex">
                <button class="btn btn-primary w-50"
                    ng-click="filterCustomers(); $event.preventDefault(); $event.stopPropagation();">Xem</button>
                <a class="btn btn-primary w-50" href="/Customer/Create">Thêm</a>
            </div>
            <div class="control-group btn-fullwidth flex-grow-1">
                <a class="btn btn-primary" href="/Customer/PrintBarCode">In mã vạch</a>
            </div>
            <div class="mb-3" ng-show="showZalo">
                <label>Zalo OA</label>
                <div class="control-group d-flex justify-content-between gap-10 btn-group-flex">
                    <div class="w-80">
                        <select class="form-control mb-0" ng-model="zaloUpdateType">
                            <option value="0" selected>Thêm người quan tâm mới</option>
                            <option value="1">Cập nhật thông tin người quan tâm</option>
                            <option value="2">Xóa người bỏ quan tâm</option>
                        </select>
                    </div>
                    <button class="btn btn-primary w-20" ng-click="updateFollowerNew()"><i class="fa-solid fa-rotate"></i></button>
                </div>
            </div>
            <hr style="margin-top:0px" />
            <div>
                <label>Nhập/Xuất dữ liệu từ Excel</label>
                <form action="/Supplyer/Upload" class="upload-form ng-pristine ng-valid" enctype="multipart/form-data"
                    method="post">
                    <div class="mb-3 d-flex align-items-center gap-10 btn-group-flex">
                        <div style="display: none"> <input id="uploadFile" name="uploadFile" type="file"><br></div>
                        <input type="button" value="Tải File" title="Tải file"
                            ng-click="openFileDialog(); $event.preventDefault(); $event.stopPropagation();"
                            class="btn btn-default btn-outline" accept="Excel/*.xlsx">
                        <a class="btn btn-default btn-outline" href="/Supplyer/ExportToExcel">Xuất File</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-9">
        <div class="baocao-container box-group-white">
            <h2 class="d-block text-center"><b>{{title}}</b></h2>
            <table tr-ng-grid="" items="CustomerModel" locale="en" display-total-items-count="true"
                class="table table-striped table-bordered table-hover" selection-mode="None"
                current-page="setCurrentPage" enable-filtering="false" enable-sorting="false"
                page-items="model.pageSize" total-items="CustomerModel.length">
                <thead>
                    <tr>
                        <th display-name="#"></th>
                        <th field-name="MaKhachHang" enable-sorting="true" display-name="Mã"></th>
                        <th field-name="TenKhachHang" enable-sorting="true" display-name="Khách hàng">
                            <span>Khách hàng</span>
                        </th>
                        <th display-name="Mã số thuế" ng-if="showTaxCode"></th>
                        <th field-name="NhomKhachHang" enable-sorting="true" display-name="Nhóm"></th>
                        <th display-name="Số ĐT"></th>
                        <th display-name="Ngày sinh"><span>Ngày sinh</span></th>
                        <th display-name="Mã vạch"></th>
                        <th class="hidden" display-name="Điểm/Tiền"></th>
                        <th display-name="Ngày tạo"></th>
                        <th display-name="Nhà thuốc" ng-if="showCusToStoreMapping" style="width:250px;"></th>
                        <th display-name="Zalo khách hàng" ng-if="showZalo" style="width:250px;"></th>
                        <th style="width:80px;"></th>
                    </tr>
                </thead>

                <tbody>
                    <tr>
                        <td>
                            <div>
                                <a href=""
                                    ng-click="onRegionalDetails(gridItem.MaKhachHang, 4); $event.preventDefault(); $event.stopPropagation();">

                                </a>
                            </div>
                        </td>

                        <td field-name="MaKhachHang">
                            <div>
                                <!-- {{gridItem.CodeKhachHang}} -->
                            </div>
                        </td>

                        <td field-name="TenKhachHang">
                            <div>
                                <!-- {{gridItem.TenKhachHang}} -->
                            </div>
                        </td>

                        <td ng-if="showTaxCode">
                            <div>
                                <!-- {{gridItem.TaxCode}} -->
                            </div>
                        </td>

                        <td field-name="NhomKhachHang">
                            <div>

                            </div>
                        </td>

                        <td>
                            <div>
                                <!-- {{gridItem.SoDienThoai}} -->
                            </div>
                        </td>
                        <td>
                            <div>
                                <!-- {{gridItem.BirthDate | date:'dd/MM/yyyy'}} -->
                            </div>
                        </td>
                        <td>
                            <div style="text-align:right">
                                <!-- {{gridItem.BarCode}} -->
                            </div>
                        </td>

                        <td class="hidden">
                            <div>
                                <!-- {{gridItem.ScoreAndAmount}} -->
                            </div>
                        </td>

                        <td>
                            <div>
                                <!-- {{gridItem.CreatedDate | date:'dd/MM/yyyy'}} -->
                            </div>
                        </td>

                        <td ng-if="showCusToStoreMapping">
                            <div>
                                <!-- <ui-select ng-model="gridItem.MappingStoreId" theme="select2" on-select="onMappingStoreChanged(gridItem, $item)" style="width:100%;">
                                    <ui-select-match placeholder="Chọn hoặc gõ vào để tìm...">{{$select.selected.Name}}</ui-select-match>
                                    <ui-select-choices repeat="item.IdAsInt as item in mappingStores | propsFilter: {Name: $select.search}">
                                        <div ng-bind-html="item.Name | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select> -->
                            </div>
                        </td>
                        <td ng-if="showZalo">
                            <div>
                                <!-- <ui-select ng-model="gridItem.ZaloId" theme="select2" on-select="onMappingFolllowerChanged(gridItem, $item)" style="width:100%;">
                                    <ui-select-match placeholder="Chọn hoặc gõ vào để tìm...">{{$select.selected.Name}}</ui-select-match>
                                    <ui-select-choices repeat="item.UserID as item in mappingFollowers | propsFilter: {Name: $select.search}">
                                        <image ng-if="item.UserID" image-error-directive="" class="img-circle pull-right" ng-src="{{item.Avatar}}" width="50px" /><div style="height: 50px; padding-top: 20px;" ng-bind-html="item.Name | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select> -->
                            </div>
                        </td>

                        <!-- action-->
                        <td>
                            <!-- KH active-->
                            <!-- <div ng-if="gridItem.RecordStatusID == 0" style="text-align:right" class="baocao-actions">
                                <a href="/Customer/Edit/{{gridItem.MaKhachHang}}" class="btn btn-sm btn-primary"><i class="fa-regular fa-pen-to-square"></i></a>
                                <a href="#" ng-click="deleteCustomer(gridItem); $event.preventDefault(); $event.stopPropagation();" class="btn btn-sm btn-danger"><i class="fa-regular fa-trash"></i></a>
                                <a ng-show="gridItem.RecordStatusID == 2" href="#"
                                   ng-click="recoverDeletedCustomer(gridItem); $event.preventDefault(); $event.stopPropagation();" class="btn btn-sm btn-primary"><i class="fa-regular fa-arrow-rotate-left"></i></a>
                            </div> -->

                            <!-- KH bị đánh dấu xóa-->
                            <!-- <div ng-if="gridItem.RecordStatusID == 2" class="baocao-actions">
                                <a href="#" ng-click="$event.preventDefault();recoverDeletedCustomer(gridItem)" class="btn btn-sm btn-primary"><i class="fa-regular fa-arrow-rotate-left"></i></a>
                                <a href="#"
                                   ng-click="$event.preventDefault();deleteForever(gridItem)" class="btn btn-sm btn-danger"><i class="fa-regular fa-trash"></i></a>
                            </div> -->
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr id="footerId">
                        <td align="center">
                            <span class="form-group pull-left page-size">
                                <select id="ddlPageSize" class="form-control" ng-model="model.pageSize"
                                    ng-options="item.pageSizeKey as item.pageSizeValue for item in pageSizeList"
                                    ng-change="changePageSize()"></select>
                                <span class="page-size-label">&#160;&#160;Dòng / Trang</span>
                            </span>
                            <span tr-ng-grid-pager="" style="height:40px;"></span>
                        </td>
                    </tr>
                </tfoot>

            </table>

            <div ng-show="model.length <= 0">
                <p class="text-danger text-center mt-3">Không tìm thấy khách hàng nào</p>
            </div>
        </div>
    </div>
</div>