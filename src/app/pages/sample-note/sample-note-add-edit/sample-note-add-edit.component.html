<div>
    <form role="form" name="SampleNoteForm">
        <div class="row">
            <div class="col-md-4">
                <div class="sidebar-bg">
                    <h4 class="mt-0"><b>{{title}}</b></h4>
                    <hr style="margin-top:0px" />
                    <div class="form-inline-flex mb-3">
                        <label class="control-label" for="NoteName">Ngày</label>
                        <div class="flex-grow-1">
                            <div class="clickable-text daterange-picker"><input type="text"
                                    disabled="{{action == 'view'}}" name="noteDate" id="note-date-id"
                                    ng-model="SampleNote.NoteDate"><span></span></div>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="TypeId">Loại đơn</label>
                        <div *ngIf="currentDrugStoreCode == '3214'" class="flex-grow-1">
                            <select class="form-control mb-0" ng-model="SampleNote.TypeSampleNote" required id="TypeId"
                                name="TypeId" disabled="{{action == 'view'}}">
                                <option value="0">test</option>
                            </select>
                        </div>
                        <div *ngIf="currentDrugStoreCode != '3214'" class="flex-grow-1">
                            <select class="form-control mb-0" ng-model="SampleNote.TypeId" required id="TypeId"
                                name="TypeId" disabled="{{action == 'view'}}">
                                <option value="0">test</option>
                            </select>
                            <span class="text-danger"
                                ng-iff="submited|| (SampleNoteForm.TypeId.$touched && SampleNoteForm.TypeId.$invalid)">
                                <span
                                    ng-if="SampleNoteForm.TypeId.$error.required && (SampleNote.TypeId == '' ||  SampleNote.TypeId == null) && isConnect == 1">Chọn
                                    loại đơn</span>
                            </span>
                        </div>

                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="FormOfTreatment">HT điều trị</label>
                        <div class="flex-grow-1">
                            <select class="form-control mb-0" ng-model="SampleNote.FormOfTreatment" required
                                id="FormOfTreatment" name="FormOfTreatment" disabled="{{action == 'view'}}">
                                <option value="0">test</option>
                            </select>
                            <span class="text-danger"
                                ng-if="submited|| (SampleNoteForm.FormOfTreatment.$touched && SampleNoteForm.FormOfTreatment.$invalid)">
                                <span
                                    ng-if="SampleNoteForm.FormOfTreatment.$error.required && (SampleNote.FormOfTreatment == '' || SampleNote.FormOfTreatment == null ) && isConnect == 1">Chọn
                                    hình thức điều trị</span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="NoteName">Tên đơn<span class="text-danger">*</span></label>
                        <div class="flex-grow-1">
                            <input class="form-control mb-0" disabled="{{action == 'view'}}" required id="NoteName"
                                name="NoteName" ng-model="SampleNote.NoteName" type="text">
                            <span class="text-danger"
                                ng-if="submited|| (SampleNoteForm.NoteName.$touched && SampleNoteForm.NoteName.$invalid)">
                                <span ng-if="SampleNoteForm.NoteName.$error.required">Nhập tên đơn</span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="Barcode">Mã vạch</label>
                        <div class="flex-grow-1">
                            <div class="{{action == 'view'?'':'input-group'}}">
                                <input class="form-control mb-0" disabled="{{action == 'view'}}" maxlength="100"
                                    ng-model="SampleNote.Barcode" type="text">
                                <span class="input-group-btn" *ngIf="action == 'create' || action == 'edit'">
                                    <a href="javascript:void(0);" class="btn btn-primary"
                                        ng-click="fnGenbarcode(); $event.preventDefault(); $event.stopPropagation();"><i
                                            class="fa-regular fa-barcode-read"></i></a>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="Doctor">Bác sỹ</label>
                        <div *ngIf="action == 'view'">
                            <!-- {{SampleNote.Doctor.TenBacSy}} -->
                        </div>
                        <div class="flex-grow-1">
                            <div class="input-group" *ngIf="action == 'create' || action == 'edit'">
                                <input type="text" class="form-control">
                                <div class="input-group-btn">
                                    <button class="btn btn-primary"
                                    (click)="doctorID = 0" data-toggle="modal"
                                    data-target="#doctor-add-edit-dialog"
                                        title="Thêm bác sỹ mới nếu chưa có">
                                        <i class="fa-regular fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-3" ng-if="SampleNote.DoctorId > 0">
                        <label class="control-label">Số điện thoại</label>
                        <div class="flex-grow-1"><a ng-click="detailDoctor(SampleNote.Doctor)"></a></div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="Custommer">Bệnh nhân</label>
                        <div *ngIf="action == 'view'" class="mt-3 col-md-8">
                            <!-- {{receiverSelectedItem.Name}} -->
                        </div>
                        <div class="flex-grow-1">
                            <div class="input-group" *ngIf="action == 'create' || action == 'edit'">
                                <input type="text" class="form-control">
                                <div class="input-group-btn">
                                    <button class="btn btn-primary" (click)="customerID = 0" data-toggle="modal"
                                    data-target="#customer-add-edit-dialog" title="Thêm khách hàng mới nếu chưa có">
                                        <i class="fa-regular fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group mb-3" ng-if="receiverSelectedItem !=null">
                        <label class="control-label">Số điện thoại</label>
                        <div class="flex-grow-1"><a ng-click="detailCustomer(SampleNote.Customer)"></a></div>
                    </div>
                    <div class="form-group mb-3" ng-if="receiverSelectedItem !=null">
                        <label class="control-label">Địa chỉ</label>
                        <div class="flex-grow-1"></div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label">Chẩn đoán bệnh</label>
                        <div class="flex-grow-1">
                            <input type="text" class="form-control">
                        </div>
                    </div>
                    <div class="form-group mb-3" ng-if=" isConnect == 1">
                        <label class="control-label" for="Description">Chẩn đoán của B.S</label>
                        <div class="flex-grow-1">
                            <textarea class="form-control mb-0" disabled="{{action == 'view'}}"
                                ng-model="SampleNote.Conclude" maxlength="255" type="text"></textarea>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="Description">Lời dặn của B.S</label>
                        <div class="flex-grow-1">
                            <textarea class="form-control mb-0" disabled="{{action == 'view'}}"
                                ng-model="SampleNote.Description" maxlength="255" type="text"></textarea>
                        </div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="control-label" for="Barcode">Tiền bán</label>
                        <div class="flex-grow-1">
                            <div ng-class="action == 'view'?'':'input-group'">
                                <input class="form-control mb-0" disabled="{{action == 'view'}}" maxlength="100"
                                    ng-model="SampleNote.Amount" type="text" awnum="app-decimal-number">
                                <span class="input-group-btn" *ngIf="action == 'create' || action == 'edit'">
                                    <input type="button" value="F" class="btn btn-default"
                                        title="Ấn vào đây để = Tổng tiền"
                                        ng-click="onPayFull(); $event.preventDefault(); $event.stopPropagation();" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end align-items-center gap-10">
                        <a href="/SampleNote/List" class="btn btn-default flex-grow-1">Quay lại</a>
                        <input *ngIf="action == 'view'" type="button" ng-click="updateNote(SampleNote.NoteID)" id="0"
                            title="Sửa" value="Sửa" class="btn btn-primary flex-grow-1" />
                        <input *ngIf="action == 'create'" type="button"
                            ng-click="fnSave(SampleNoteForm.$valid,'no'); $event.preventDefault(); $event.stopPropagation();"
                            value="Lưu đơn" class="btn btn-primary flex-grow-1">
                        <input *ngIf="action == 'create' && isClinic && isConnect" type="button"
                            ng-click="fnSave(SampleNoteForm.$valid , 'yes'); $event.preventDefault(); $event.stopPropagation();"
                            value="Lưu đơn và LT" class="btn btn-primary flex-grow-1">
                        <input *ngIf="action == 'edit'" type="button"
                            ng-click="fnSave(SampleNoteForm.$valid); $event.preventDefault(); $event.stopPropagation();"
                            value="Cập nhật" class="btn btn-primary flex-grow-1">
                        <a href="" *ngIf="action == 'view' || action == 'edit'" title="Xuất bán"
                            class="btn btn-primary flex-grow-1">Xuất bán</a>
                        <input *ngIf="action == 'view' || action == 'edit'" type="button"
                            ng-click="fnOpenForPrint(); $event.preventDefault(); $event.stopPropagation();" value="In"
                            class="btn btn-default flex-grow-1">

                        <div class="btn-group"
                            ng-if="receiverSelectedItem !=null && SampleNote.NoteID > 0 && permittedFields.SampleNote_Print">
                            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                In <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="javascript:;" ng-click="printNoteDrug(4)">In đơn/liều - 58mm</a></li>
                                <li><a href="javascript:;" ng-click="printNoteDrug(3)">In đơn/liều - 80mm</a></li>
                                <li><a href="javascript:;" ng-click="onPrintGroupByGroupDrugId(2)">In đơn/liều - A5</a>
                                </li>
                                <li><a href="javascript:;" ng-click="onPrintGroupByGroupDrugId(1)">In đơn/liều - A4</a>
                                </li>
                                <!-- <li><a href="javascript:;" ng-click="printNoteDrug(2)">In đơn/liều - A5</a></li>
                                    <li><a href="javascript:;" ng-click="printNoteDrug(1)">In đơn/liều - A4</a></li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="box-group-white">
                    <h2 class="text-center"><b>Danh sách thuốc</b></h2>
                    <div class="row" *ngIf="action == 'create' || action == 'edit'">
                        <div class="col-md-12">
                            <div *ngIf="deviceType != 0" class="input-group">
                                <div item-search-filter select-changed-callback="onDrugSelectChanged"
                                    clear-after-selected="true" search-type="5" record-status-id="0"
                                    show-cam-barcode-scanner="true" inventory-viewable="!isClinic">
                                </div>
                            </div>
                            <div *ngIf="deviceType == 0">
                                <div item-search-filter select-changed-callback="onDrugSelectChanged"
                                    clear-after-selected="true" search-type="5" show-cam-barcode-scanner="false"
                                    record-status-id="0" inventory-viewable="!isClinic">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br *ngIf="action == 'create' || action == 'edit'" />
                    <table tr-ng-grid="" items="model.items" display-total-items-count="true" locale="en"
                        class="table table-striped table-bordered table-hover" selection-mode="None"
                        current-page="setCurrentPage" enable-filtering="false" enable-sorting="false">
                        <thead>
                            <tr>
                                <th width="4%" display-name="#"></th>
                                <th width="9%" display-name="Mã"></th>
                                <th width="20%" display-name="Tên"></th>
                                <th width="12%" display-name="Đơn vị"></th>
                                <th width="10%" display-name="Số lượng"></th>
                                <th *ngIf="isClinic && isConnect" width="9%" display-name="Tồn kho"></th>
                                <th *ngIf="" width="5%"
                                    display-name="Đợt dùng thuốc"></th>
                                <th width="15%" display-name="Ghi chú"></th>
                                <th width="9%" display-name="Giá bán"></th>
                                <th width="9%" display-name="Tổng tiền"></th>
                                <th width="4%" display-name=""></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-hide="gridItem.IsDelete">
                                <td>
                                    <div>
                                        <a href=""
                                            ng-click="onDrugInfoDetails(gridItem.ThuocId); $event.preventDefault(); $event.stopPropagation();">
                                            <!-- {{gridItem.Order}} -->1
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <!-- {{gridItem.MaThuoc}} -->EGO+13.810
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <!-- {{gridItem.TenThuoc}} -->Miếng dán vết thương Ego (72x19mm)
                                    </div>
                                </td>
                                <td>
                                    <select class="form-control mb-0" disabled="{{action == 'view'}}"
                                        ng-model="gridItem.DrugUnitID">
                                        <option value="1">viên</option>
                                    </select>
                                </td>
                                <td>
                                    <div>
                                        <input class="form-control mb-0" disabled="{{action == 'view'}}" required
                                            name="" ng-model="gridItem.Quantity"
                                            type="number" />
                                        <span class="text-danger"
                                            *ngIf="">
                                            <span *ngIf="">Nhập số
                                                lượng</span>
                                        </span>
                                    </div>
                                </td>
                                <td *ngIf="isClinic && isConnect">
                                    <div style="text-align:right"
                                        ng-click="onGetDataDetailLastValueWarehouse(gridItem)">
                                        <span class="btn btn-link" title="Xem tồn ở các kho">10</span>
                                    </div>
                                </td>
                                <td *ngIf="">
                                    <span
                                        ng-click="updateInfoDrugUse($event, gridItem); $event.preventDefault(); $event.stopPropagation();"
                                        style=""><i
                                            class="glyphicon glyphicon-calendar"></i></span>
                                </td>
                                <td>
                                    <input id="autocomplete" class="form-control" disabled="{{action == 'view'}}"
                                        ng-model="gridItem.Comment" list="browsers">
                                    <datalist id="browsers"></datalist>

                                </td>
                                <td>
                                    <div class="number-value">
                                        <!-- <strong> {{getPrice(gridItem) | number:0}}</strong> -->1,667
                                    </div>
                                </td>
                                <td>
                                    <div class="number-value">
                                        <!-- <strong> {{getAmount(gridItem) | number:0}}</strong> -->1,667
                                    </div>
                                </td>
                                <td>
                                    <div *ngIf="action == 'create' || action == 'edit'">
                                        <a class="btn btn-danger delete-line"
                                            ng-click="fnRemoveItem(gridItem); $event.preventDefault(); $event.stopPropagation();"
                                            title="Xóa"><i class="fa-regular fa-xmark"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="text-right mt-3">
                        <!-- <span><strong class="text-danger">Tổng tiền: {{getTotalAmount() | number:0}}</strong> </span> -->Tổng tiền: 1,667
                    </div>
                </div>

            </div>
        </div>
    </form>
</div>