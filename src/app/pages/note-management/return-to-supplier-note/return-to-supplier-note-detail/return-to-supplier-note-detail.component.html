<div class="card-bg ng-scope">
    <h2 class="card-title text-center mt-0"><b>TRẢ LẠI HÀNG NHÀ CUNG CẤP</b></h2>
    <div class="text-center card-desc">
        <div class="card-code">
            Mã số: <strong>{{formData.value?.soPhieuXuat}}</strong>
        </div>
        <span id="" style="width: 10%">Ngày: <strong>{{formData.value?.ngayXuat}}</strong></span>
    </div>

    <input value="25/03/2024 15:44" data-val="true" data-val-date="The field NoteDate must be a date."
        data-val-required="The NoteDate field is required." id="NoteDate" name="NoteDate" type="hidden">


    <input value="0" data-val="true" data-val-number="The field NoteId must be a number."
        data-val-required="The NoteId field is required." id="NoteId" name="NoteId" type="hidden">

    <input value="4" data-val="true" data-val-number="The field NoteTypeId must be a number."
        data-val-required="The NoteTypeId field is required." id="NoteTypeId" name="NoteTypeId" type="hidden">
    <table class="table borderless table-condensed">
        <tbody>
            <tr>
                <td style="text-align: left">
                    <span class="control-label"><b>Nhà cung cấp: </b>{{formData.value?.nhaCungCapMaNhaCungCapText}}</span>
                </td>

            </tr>
        </tbody>
    </table>
    <table mat-table class="table-condensed table-responsive display table-bordered" [dataSource]="getDataSource()">
        <ng-container matColumnDef="stt">
            <th mat-header-cell *matHeaderCellDef style="width: 10px"> STT</th>
            <td mat-cell *matCellDef="let data; index as i;" class="text-center" style="vertical-align: middle;">
                <span (click)="openDetailDialog(data.thuocThuocId)" class="btn-link">{{data.itemOrder}}</span>
            </td>
        </ng-container>

        <ng-container matColumnDef="maHang">
            <th mat-header-cell *matHeaderCellDef style="width: 70px">Mã</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;">
                <span>{{data.maThuocText}}</span>
            </td>
        </ng-container>

        <ng-container matColumnDef="anh">
            <th mat-header-cell *matHeaderCellDef style="width: 100px">Hình ảnh </th>
            <td mat-cell *matCellDef="let data" class="text-right">
<!--            {{formData.value?.imageThumbData}}-->
            </td>
        </ng-container>

        <ng-container matColumnDef="tenHang">
            <th mat-header-cell *matHeaderCellDef style="width: 100px">Tên hàng</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;">
                <span>{{data.tenThuocText}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="donVi">
            <th mat-header-cell *matHeaderCellDef style="width: 100px;"> Đơn vị</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;">
                <span>{{data.donViTinhMaDonViTinhText}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="soLuong">
            <th mat-header-cell *matHeaderCellDef style="width: 100px; text-align: right"> Số lượng</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;text-align: right">
                <span>{{data.soLuong | number}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="donGia">
            <th mat-header-cell *matHeaderCellDef style="width: 100px; text-align: right">Đơn giá</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;text-align: right">
                {{data.giaXuat | number}}
            </td>
        </ng-container>
        <ng-container matColumnDef="vat">
            <th mat-header-cell *matHeaderCellDef style="width: 80px; text-align: right"> C.K(%)</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;text-align: right">
                {{data.vat | number}}
                </td>
        </ng-container>
        <ng-container matColumnDef="thanhTien">
            <th mat-header-cell *matHeaderCellDef style="width: 100px; text-align: right">Thành tiền</th>
            <td mat-cell *matCellDef="let data" style="vertical-align: middle;text-align: right">
                {{ data.tongTien | number}}
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <table class="table borderless table-condensed">
        <tbody>
            <tr>
                <td style="text-align: left" class="w-50">
                    <span class="control-label">
                        <b>Tổng số tiền: &nbsp;<span id="spanSumAll"></span></b><span>{{formData.value?.tongTien | number}}</span>
                    </span>
                </td>
                <td style="text-align: left">
                    <span class="control-label">
                    </span>
                </td>
                <td style="text-align: right">
                    <span class="control-label">
                    </span>
                </td>
                <td style="text-align: right">
                    <span class="control-label">
                        <b>Đã trả: </b><span>{{formData.value?.daTra | number}}</span>
                    </span>
                    <span class="d-block mt-2 mb-2"><b>Hình thức thanh toán:</b> Tiền mặt</span>
                    <span id="spDebt" class="text-danger">
                        <strong>Trả lại:</strong> {{formData.value?.backPaymentAmount | number}}
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

    <table class="table table-condensed table-bordered">
        <tbody>
            <tr>
                <td class="text-left">
                    <span class="control-label"><b>Diễn giải: </b></span>
                    <span class="control-label">{{formData.value?.dienGiai}}</span>
                </td>

                <td class="text-right">
                    <span class="control-label">[<b>Người lập: </b> </span>
                    <span class="control-label ng-binding">{{formData.value?.createdByUserText}}]</span>
                </td>
                <td class="text-right">
                    <span class="control-label">[<b>Ngày lập: </b> </span>
                    <span class="control-label">{{formData.value?.created | appDate}}]</span>
                </td>
            </tr>
        </tbody>
    </table>
    <input value="2" data-val="true" data-val-number="The field RecordStatusId must be a number."
        data-val-required="The RecordStatusId field is required." id="RecordStatusId" name="RecordStatusId"
        type="hidden">
    <div class="form-group mt-3">
        <div class="col-md-12">
            <div class="d-flex justify-content-center align-items-center gap-10">
                <input type="button" value="Quay lại" class="btn btn-default"
                    onclick="javascript:window.history.go(-1);">
                <input type="button" class="btn btn-default" value="In" (click)="printPreview()">
                <a class="btn btn-default"
                   href="/management/note-management/return-to-supplier-note-screen/{{formData.value?.id}}">Sửa</a><a
                    class="btn btn-default"
                    href="/DeliveryNote/ConnDeliveryNoteScreen?noteId=35155501&amp;isConnectivity=1">LT</a><a
                    class="btn btn-default"
                    href="/DeliveryNote/ManagementDeliveryNoteScreen?noteId=35155501&amp;isManagement=1">QL</a>
                 <a class="btn btn-danger" (click)="delete('Bạn có chắc chắn muốn xóa phiếu trả lại của nhà cung cung cấp \'' +
                    formData.value?.nhaCungCapMaNhaCungCapText + '\' có số phiếu \'' + formData.value?.soPhieuXuat + '\' ?', formData.value?.id)">
                    Xóa</a>
            </div>
        </div>
    </div>
</div>
