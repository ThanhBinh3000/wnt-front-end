<div>
    <div class="row">
        <div class="col-md-3">
            <div class="sidebar-bg">
                <fieldset>
                    <label>Trạng thái đơn</label>
                    <div class="control-group">
                        <select id="orderStatus" name="orderStatus" class="form-control">
                           <option>Tất cả</option>
                        </select>
                    </div>
                </fieldset>
                <fieldset>
                    <label>Tìm theo</label>
                    <div class="control-group">
                        <select class="form-control">
                            <option>Mã-Tên</option>
                        </select>
                        <input type="text" class="form-control"/>
                    </div>
                </fieldset>
                <fieldset ng-if="filterModel.IsGeneralPharmacy">
                    <div>
                        <label>Nhà thuốc</label>
                        <div class="control-group">
                            <input type="text" class="form-control"/>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="baocao-filter">
                    <div report-date-rage-filter
                        display-data-table-id="table-id-orders"
                        excel-file-name="Orders.xls"
                        filter-type="filterType"
                        display-data-callback="onDisplayOrdersData"
                        export-callback="onExport"
                        supress-export="deviceType!=0" supress-print="true"
                        init-date-range-to-current-date="true"
                        call-callback-after-init="true"></div>
                </fieldset>
                <hr />
                <div class="d-flex align-items-center gap-10">
                    <a href="/management/order/create-order"
                       type="button" class="btn btn-primary w-50" ng-if="!filterModel.IsGeneralPharmacy">Đặt hàng</a>
                    <a href="/management/order/search-drug" ng-if="!filterModel.IsGeneralPharmacy"
                       type="button" class="btn btn-default w-50">Nhặt hàng</a>
                </div>
                
            </div>
        </div>

        <div class="col-md-9">
            <div class="box-group-white">
                <div class="box-group-title">
                    <h2 class="text-center"><b>Tra cứu đơn đặt hàng</b></h2>
                
                </div>
                <div class="d-flex align-items-center gap-10 justify-content-end mb-3">
                    <span>Đơn mới: <strong class="text-danger"> 
                        <!-- {{NewOrderCount | number:0}} -->1
                     </strong> </span>
                    <span ng-if="!filterModel.IsGeneralPharmacy">Đơn đã gửi: <strong class="text-danger"> 
                        <!-- {{SentSellerOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn đang xử lý: <strong class="text-danger"> 
                        <!-- {{InProgresOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn bị hủy: <strong class="text-danger"> 
                        <!-- {{CanceledOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn đã hoàn thành: <strong class="text-danger"> 
                        <!-- {{CompletedOrderCount | number:0}} -->1
                     </strong> </span>
                </div>
                <div class="table-scroll table-responsive">
                    <table class="table table-striped table-bordered table-hover tr-ng-grid">
                        <thead>
                            <tr>
                                <th display-name="STT" style="width: 10px;">STT</th>
                                <th field-name="OrderId" display-name="Mã số" enable-sorting="false">
                                    <span>Mã số</span>
                                </th>
                                <th field-name="ItemDate" display-name="Ngày" enable-sorting="true">Ngày</th>
                                <th field-name="StaffName" display-name="Nhân viên" enable-sorting="false" ng-if="!filterModel.IsGeneralPharmacy">Nhân viên</th>
                                <th field-name="DrugStoreName" display-name="Nhà thuốc" enable-sorting="true" ng-if="filterModel.IsGeneralPharmacy">Nhà thuốc</th>
                                <th display-name="SL thuốc">
                                    <span>SL thuốc</span>
                                </th>
                                <th display-name="Phiếu xuất" ng-if="filterModel.IsGeneralPharmacy">
                                    <span>Phiếu xuất</span>
                                </th>
                                <th field-name="Amount" display-name="Tổng tiền" enable-sorting="true">
                                    <span>Tổng tiền</span>
                                    <p class="number-value">Σ = 
                                        <!-- {{TotalAmount | number:0}} -->1.000
                                    </p>
                                </th>
                                <th field-name="Discount" display-name="Chiết khấu" enable-sorting="true">
                                    <span>Tiền C.K</span>
                                    <p class="number-value">Σ = 
                                        <!-- {{TotalDiscountAmount| number:0}} --> 1.000
                                    </p>
                                </th>
                                <th field-name="OrderStatusId" display-name="Trạng thái" enable-sorting="false">Trạng thái</th>
                                <th display-name="Khách hàng">Khách hàng</th>
                                <th display-name="Nhà tổng" ng-if="filterModel.IsSellerOrderingSupervisor">Nhà tổng</th>
                                <th display-name="#">#</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <!--STT-->
                                <td><div>
                                    <!-- {{gridItem.Order}} -->1
                                </div></td>

                                <!--Mã số-->
                                <td field-name="OrderId">
                                    <div>
                                        <!-- {{gridItem.ItemNumber}} -->1
                                    </div>
                                </td>

                                <!--Ngày-->
                                <td field-name="ItemDate">
                                    <div>
                                        <!-- {{gridItem.OrderDateTimeText}} -->2/2/2024
                                    </div>
                                </td>

                                <!--Nhân viên-->
                                <td field-name="StaffName" ng-if="!filterModel.IsGeneralPharmacy">
                                    <div>
                                        <!-- {{gridItem.StaffName}} -->Nhân Viên A
                                    </div>
                                </td>

                                <!--Nhà thuốc (đặt hàng)-->
                                <td field-name="DrugStoreName" ng-if="filterModel.IsGeneralPharmacy">
                                    <div>
                                        <a href="#" ng-click="onDrugStoreDetails(gridItem); $event.preventDefault(); $event.stopPropagation();">
                                            <!-- {{gridItem.DrugStoreName}} -->Nhà thuốc A
                                        </a>
                                    </div>
                                </td>

                                <!--SL Thuốc-->
                                <td>
                                    <div>
                                        <!-- {{gridItem.DrugCount}} -->1
                                    </div>
                                </td>

                                <!--Phiếu Xuất-->
                                <td ng-if="filterModel.IsGeneralPharmacy">
                                    <div ng-if="gridItem.DeliveryNoteId > 0">
                                        <a href="/PhieuXuats/Details/">
                                            <!-- {{gridItem.DeliveryNoteId}} --> 1
                                        </a>
                                    </div>
                                </td>

                                <!--Tổng tiền-->
                                <td field-name="Amount">
                                    <div class="number-value">
                                        <!-- {{gridItem.Amount | number:0}} -->1.000
                                    </div>
                                </td>

                                <!--Chiết khấu-->
                                <td field-name="Discount">
                                    <div class="number-value">
                                        <!-- {{gridItem.DiscountAmount | number:0}} -->100
                                    </div>
                                </td>

                                <!--Trạng thái-->
                                <td field-name="OrderStatusId">
                                    <div>
                                        <!-- {{getOrderStatusText(gridItem)}} -->Đơn tạo mới
                                    </div>
                                </td>

                                <!--Khách hàng-->
                                <td>
                                    <div>
                                        <!-- {{gridItem.DrugStoreName}} -->Nhà thuốc A
                                    </div>
                                </td>

                                <!--Nhà tổng-->
                                <td ng-if="filterModel.IsSellerOrderingSupervisor">
                                    <div>
                                        <!-- {{gridItem.SupplierStoreName}} -->Nhà cung cấp A
                                    </div>
                                </td>

                                <!--Actions-->
                                <td>
                                    <div ng-if="gridItem.RecordStatusId === 0">
                                        <div ng-if="!filterModel.IsGeneralPharmacy && ! canApprovalBySupervisor(gridItem)">
                                            <a ng-if="canViewOrder(gridItem)" href="/OrderMan/OrderDetails?orderId=">
                                                Xem
                                            </a>
                                            <span ng-if="canEditOrder(gridItem)">
                                                |
                                                <a ng-if="permittedFields.Order_Write" href="/OrderMan/EditOrder?orderId=">
                                                    Sửa
                                                </a>
                                            </span>

                                            <span ng-if="canDeleteOrder(gridItem)">
                                                |
                                                <a ng-if="permittedFields.Order_Delete" href="#" ng-click="onDeleteOrder(gridItem); $event.preventDefault(); $event.stopPropagation();">
                                                    Xóa
                                                </a>
                                            </span>
                                            <span ng-if="canSendOrder(gridItem)">
                                                |
                                                <a ng-if="permittedFields.Order_Send" href="#" ng-click="onSendOrder(gridItem); $event.preventDefault(); $event.stopPropagation();">
                                                    Gửi
                                                </a>
                                            </span>
                                        </div>

                                        <div ng-if="filterModel.IsGeneralPharmacy || canApprovalBySupervisor(gridItem)">
                                            <a ng-if="canViewOrder(gridItem)" href="/OrderMan/OrderDetails?orderId=">
                                                Xem
                                            </a>
                                            <span ng-if="canApprovalBySupervisor(gridItem)">
                                                |
                                                <a href="#" ng-click="onApproveOrderBySupervisor(gridItem); $event.preventDefault(); $event.stopPropagation();">
                                                    Duyệt
                                                </a>
                                            </span>
                                            <span ng-if="canHandleOrder(gridItem)">
                                                |
                                                <a href="/OrderMan/EditOrder?orderId=&markHandling=1">
                                                    Xử lý
                                                </a>
                                            </span>
                                            <span ng-if="canCancelOrder(gridItem)">
                                                |
                                                <a href="#" ng-click="onCancelOrder(gridItem); $event.preventDefault(); $event.stopPropagation();">
                                                    Hủy
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr id="footerId">
                                <td align="center"
                                    class="ng-scope" colspan="13">
                                    <div class="tr-ng-grid-footer form-inline">
                                        <div ng-switch-when="true" class="ng-scope">
                                            <div ng-transclude=""><span class="form-group pull-left page-size ng-scope">
                                                    <select id="ddlPageSize"
                                                        class="form-control ng-pristine ng-untouched ng-valid"
                                                        ng-model="model.pageSize"
                                                        ng-options="item.pageSizeKey as item.pageSizeValue for item in pageSizeList"
                                                        ng-change="changePageSize()">
                                                        <option label="10" value="number:10" selected="selected">10</option>
                                                        <option label="20" value="number:20">20</option>
                                                        <option label="50" value="number:50">50</option>
                                                        <option label="100" value="number:100">100</option>
                                                        <option label="--All--" value="number:9000">--All--</option>
                                                    </select>
                                                    <span class="page-size-label">&nbsp;&nbsp;Dòng / Trang</span>
                                                </span><span class="pull-right form-group" tr-ng-grid-pager=""
                                                    style="height:40px;">
                                                    <ul class="pagination">
                                                        <li class="ng-scope active">
                                                            <a href="" ng-click="navigateToPage(pageIndex)"
                                                                ng-if="pageIndex!==null"
                                                                class="ng-binding ng-scope" title="Trang">1</a>
                                                            </li>
                                                            <li ng-if="pageSelectionActive" class="ng-scope"><a href=""
                                                                    class="ng-binding ng-scope" title="Trang">2</a> </li>
                                                            <li class="disabled" style="white-space: nowrap;"> <span
                                                                    ng-hide="totalItemsCount || !displayTotalItemsCount"
                                                                    class="ng-binding ng-hide">Không có dữ liệu</span> <span
                                                                    ng-show="totalItemsCount &amp;&amp; displayTotalItemsCount"
                                                                    class=""> <span class="ng-binding">Tổng: 2 bản ghi</span>
                                                                </span> </li>
                                                        </ul>
                                                    </span></div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                    </table>
                </div>

                <div class="d-flex align-items-center gap-10 justify-content-end mt-3">
                    <span>Đơn mới: <strong class="text-danger"> 
                        <!-- {{NewOrderCount | number:0}} -->1
                     </strong> </span>
                    <span ng-if="!filterModel.IsGeneralPharmacy">Đơn đã gửi: <strong class="text-danger"> 
                        <!-- {{SentSellerOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn đang xử lý: <strong class="text-danger"> 
                        <!-- {{InProgresOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn bị hủy: <strong class="text-danger"> 
                        <!-- {{CanceledOrderCount | number:0}} -->1
                     </strong> </span>
                    <span>Đơn đã hoàn thành: <strong class="text-danger"> 
                        <!-- {{CompletedOrderCount | number:0}} -->1
                     </strong> </span>
                </div>
            </div>
        </div>
    </div>
</div>
